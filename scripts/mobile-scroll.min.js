(function(){"use strict";typeof window!="undefined"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e((new Date).getTime())},1e3/60)}}()),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,r)}}),function(e){e("mobileScroll",["hammer"],function(){var e,t,n,r,i,s,o,u,a,f,l;return e={ui:'<button type="button">Scroll Down</button>',overlay:"<div></div>",menu:!1,shortcuts:null,duration:500,easing:null,common:100,side:"left"},u=function(){var r,i,o,u,f,c;if(s.drag_state!==0)return;r=l.position.getY(),i=r+window.innerHeight-(typeof e.common=="number"?e.common:n.offsetHeight),e.duration>0?(o=null,u=(new Date).getTime(),c=typeof e.easing=="function"?e.easing:function(e){return e},t=!0,a(i),f=function(n){var s,h;s=(n-u)/e.duration,s<1?(h=l.position.getY(),typeof o=="number"&&Math.abs(o-h)>5?(t=!1,a(-1)):(o=r+(i-r)*c(s),window.scroll(l.position.getX(),o),window.requestAnimationFrame(f))):t=!1},window.requestAnimationFrame(f)):(window.scroll(l.position.getX(),i),a(i))},a=function(t){var i;t!==-1?i=t+(typeof e.common=="number"?e.common:n.offsetHeight)+"px":i="0px",r.style.height=i},o=function(o){var c,h;for(c in o)o.hasOwnProperty(c)&&(e[c]=o[c]);e.side=f.get("position")||e.side,typeof e.ui=="string"?r=l.element(e.overlay):e.ui.parentNode?r=e.ui.parentNode.removeChild(e.ui):r=e.ui,l.addClass(r,"mobile-scroll"),l.addClass(r,"overlay"),document.body.appendChild(r),typeof e.ui=="string"?n=l.element(e.ui):e.ui.parentNode?n=e.ui.parentNode.removeChild(e.ui):n=e.ui,l.addClass(n,"mobile-scroll"),l.addClass(n,"button"),l.addClass(n,e.side),document.body.appendChild(n),e.menu&&(i=l.element('<div class="mobile-scroll menu '+e.side+'"></div>'),document.body.appendChild(i),i.displayPrefs=function(){var t,n=this.getElementsByClassName("settings");for(t=n.length-1;t>=0;t-=1)n[t].parentNode.removeChild(n[t]);n=l.element(['<div class="settings">',"<label>Position: ",'<select size="1" class="position">','<option value="left" '+(e.side==="left"?"selected":"")+">Left</option>",'<option value="right" '+(e.side==="right"?"selected":"")+">Right</option>",'<option value="hidden">Hidden</option>',"</select>","</label>","</div>"].join("")),this.childNodes.length?this.insertBefore(n,this.childNodes[0]):this.appendChild(n)},i.displayPrefs(),i.applyPrefs=function(){var e,t;try{e=this.getElementsByClassName("settings")[0],t=e.getElementsByClassName("position")[0],t.value==="hidden"?l.addClass(n,"hidden"):(e.side=t.value,f.set("position",t.value),l.removeClass(n,"left"),l.removeClass(n,"right"),l.addClass(n,t.value),l.removeClass(i,"left"),l.removeClass(i,"right"),l.addClass(i,t.value))}catch(r){}},typeof e.shortcuts=="string"&&(h=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),h.onreadystatechange=function(){var e,t=function(e){var n,r,i;r=l.element("<ul></ul>");for(n in e)e.hasOwnProperty(n)&&(typeof e[n]=="string"?i=l.element('<li><a href="'+e[n]+'">'+n+"</a></li>"):(i=l.element("<li></li>"),i.appendChild(t(e[n]))),r.appendChild(i));return r};this.readyState===4&&this.status===200&&(e=JSON.parse(this.responseText),e=t(e),e.className="shortcuts",i.appendChild(e))},h.open("GET",e.shortcuts,!0),h.send())),s=new Hammer(document.body,{drag:!0,drag_horizontal:!0,drag_vertical:!0,transform:!1}),s.drag_state=0,s.last_position=null,s.ondragstart=function(e){var t=e.originalEvent.target||e.originalEvent.srcElement;this.drag_state===0&&t===n&&(this.drag_state=1,l.removeClass(n,"left"),l.removeClass(n,"right"))},s.ondrag=function(e){this.drag_state===1&&(this.last_position=e.position.x,n.style.left=e.position.x-n.offsetWidth/2+"px")},s.ondragend=function(){if(this.drag_state===1){var t,r,s;this.drag_state=2,l.addClass(n,"animated"),r=function(){n.style.left=null,l.removeClass(n,"animated"),l.addClass(n,t),l.unhandle(n,"transitionend",r,!1),l.unhandle(n,"oTransitionEnd",r,!1),l.unhandle(n,"MSTransitionEnd",r,!1),l.unhandle(n,"transitionend",r,!1),typeof s!="undefined"&&(window.clearTimeout(s),s=null),this.drag_state=0,this.last_position=null},r=r.bind(this),l.handle(n,"transitionend",r,!1),l.handle(n,"oTransitionEnd",r,!1),l.handle(n,"MSTransitionEnd",r,!1),l.handle(n,"transitionend",r,!1),s=window.setTimeout(r,1e3),this.last_position<=window.innerWidth/2?(t="left",n.style.left="0px"):(t="right",n.style.left=window.innerWidth-n.offsetWidth+"px"),e.side=t,f.set("position",t),e.menu&&(i.displayPrefs(),l.removeClass(i,"left"),l.removeClass(i,"right"),l.addClass(i,t))}},s.ontap=function(e){var t=e.originalEvent.target||e.originalEvent.srcElement;t===n&&u(e)},window.addEventListener("scroll",function(){t||a(-1)},!1),e.menu&&(s.onhold=function(e){var t=e.originalEvent.target||e.originalEvent.srcElement;t===n&&(l.hasClass(i,"open")?(l.removeClass(i,"open"),i.applyPrefs()):l.addClass(i,"open"))})},f={get:function(e){var t,n,r,i={};r=document.cookie.split(";");for(t=0;t<r.length;t+=1)n=r[t].split("="),i[n[0]]=n[1];return window.escape(e)in i?i[e]:null},set:function(e,t){document.cookie=window.escape(e)+"="+window.escape(t)}},l={hasClass:function(e,t){var n=e.className.replace(/^\s+|\s+$/,"").replace(/\s+/," ").split(" ");return n.indexOf(t)!==-1},addClass:function(e,t){var n=e.className.replace(/^\s+|\s+$/,"").replace(/\s+/," ").split(" ");n.indexOf(t)===-1&&n.push(t),e.className=n.join(" ")},removeClass:function(e,t){var n=e.className.replace(/^\s+|\s+$/,"").replace(/\s+/," ").split(" ");n.indexOf(t)!==-1&&n.splice(n.indexOf(t),1),e.className=n.join(" ")},element:function(e){var t=document.createElement("div");return t.innerHTML=e,t.removeChild(t.childNodes[0])},position:{getX:function(){var e;return window.pageXOffset?e=window.pageXOffset:document.documentElement&&document.documentElement.scrollLeft?e=document.documentElement.scrollLeft:document.body.scrollLeft?e=document.body.scrollLeft:e=0,e},getY:function(){var e;return window.pageYOffset?e=window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body.scrollTop?e=document.body.scrollTop:e=0,e}}},window.addEventListener?(l.handle=function(e,t,n,r){typeof r=="undefined"&&(r=!1),e.addEventListener(t,n,r)},l.unhandle=function(e,t,n,r){typeof n!="undefined"&&typeof r!="undefined"?e.removeEventListener(t,n,r):typeof n!="undefined"?e.removeEventListener(t,n):e.removeEventListener(t)}):window.attachEvent?(l.handle=function(e,t,n){e.attachEvent("on"+t,n)},l.unhandle=function(e,t,n){typeof n!="undefined"?e.detachEvent("on"+t,n):e.detachEvent("on"+t)}):(l.handle=function(e,t,n){e["on"+t]=n},l.unhandle=function(e,t){e["on"+t]=null}),o})}(typeof define=="function"?define:function(){typeof module!="undefined"?module.exports=arguments[2]():window.mobileScroll=arguments[2]()})})()